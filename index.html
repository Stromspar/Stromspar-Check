<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Eco-Rechner ‚Äî Nachhaltig rechnen. Bewusst sparen.</title>
  <meta name="description" content="Eco-Rechner: Strom, Heizung, Solar & E-Auto kalkulieren ‚Äî datenschutzfreundlich und lokal im Browser.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f4f8f5; --accent:#2f7a4a; --accent-2:#57a168; --muted:#6b6b6b; --card:#fff;
      --radius:12px; --maxw:980px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg);color:#0b2a1a}
    .wrap{max-width:var(--maxw);margin:28px auto;padding:18px}
    header{display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:60px;height:60px;border-radius:50%;background:linear-gradient(180deg,var(--accent-2),var(--accent));display:flex;align-items:center;justify-content:center}
    .logo img{width:44px;height:44px;object-fit:contain}
    .title{font-weight:700;color:var(--accent);font-size:20px}
    .slogan{font-size:13px;color:var(--muted)}
    nav a{margin-left:14px;color:var(--accent);text-decoration:none;font-weight:600}
    main{display:grid;grid-template-columns:1fr 360px;gap:22px;margin-top:18px}
    @media(max-width:920px){main{grid-template-columns:1fr}}
    .card{background:var(--card);padding:18px;border-radius:var(--radius);box-shadow:0 6px 18px rgba(6,30,15,0.04);border:1px solid rgba(0,0,0,0.03)}
    h1{margin:0;font-size:22px;color:#0b3f2a}
    .lead{color:#2b4f3a;margin:8px 0 14px}
    .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;font-weight:600;cursor:pointer;transition:.14s}
    .btn:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(47,122,74,0.16)}
    .ghost{background:transparent;color:var(--accent);border:1px solid rgba(47,122,74,0.12)}
    /* calculator right area */
    .calcWrap{position:sticky;top:18px}
    label{display:block;font-weight:600;margin-top:8px;color:#14482f}
    input, select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6efe8;background:#fbfdfb}
    .actions{display:flex;gap:8px;margin-top:12px}
    .result{margin-top:12px;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(87,161,104,0.06),rgba(47,122,74,0.03));border:1px solid rgba(47,122,74,0.08)}
    .bar{height:14px;background:#dfefe3;border-radius:999px;margin-top:10px;overflow:hidden}
    .barInner{height:100%;background:linear-gradient(90deg,var(--accent-2),var(--accent));width:0%;transition:width .6s}
    .toolsGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
    @media(max-width:920px){.toolsGrid{grid-template-columns:repeat(1,1fr)}}
    .toolCard{padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.03);background:linear-gradient(180deg,#fff,#fbfff9)}
    .toolCard h4{margin:0 0 8px;color:#234a35}
    footer{margin-top:26px;text-align:center;color:var(--muted);font-size:13px;padding:10px 0}
    .muted{color:var(--muted)}
    /* blog teaser */
    .blogTeaser{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .teaser{flex:1;min-width:260px;background:#fff;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.03)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><img src="/assets/logo-eco-rechner.png" alt="Eco-Rechner Logo"></div>
        <div>
          <div class="title">Eco-Rechner</div>
          <div class="slogan">Nachhaltig rechnen. Bewusst sparen.</div>
        </div>
      </div>
      <nav>
        <a href="/">Startseite</a>
        <a href="/blog.html">Blog</a>
        <a href="/impressum.html">Impressum</a>
      </nav>
    </header>

    <main>
      <!-- left: hero + mini tools -->
      <section class="card">
        <h1>Berechne Stromkosten, CO‚ÇÇ & mehr ‚Äî privat und schnell</h1>
        <p class="lead">Gib deinen Jahresverbrauch ein oder nutze eines der spezialisierten Tools. Alle Berechnungen laufen lokal in deinem Browser ‚Äî keine Datenspeicherung.</p>

        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn" onclick="document.getElementById('annualKwh').focus()">Losrechnen</button>
          <a class="btn ghost" href="/blog.html">Mehr Spartipps im Blog</a>
        </div>

        <h3 style="margin-top:18px">Weitere Rechner</h3>
        <div class="toolsGrid">
          <a class="toolCard" href="/rechner/solarrechner.html"><h4>‚òÄÔ∏è Solar-Rechner</h4><p class="muted">Ertrag & Amortisation f√ºr Balkon/Dach (schnell)</p></a>
          <a class="toolCard" href="/rechner/heizkosten.html"><h4>üî• Heizkosten-Rechner</h4><p class="muted">J√§hrliche Heizkosten berechnen & Einsparpotenzial</p></a>
          <a class="toolCard" href="/rechner/eauto.html"><h4>üöó E-Auto Stromkosten</h4><p class="muted">Kostenvergleich E-Auto vs. Benziner</p></a>
        </div>

        <div style="margin-top:18px">
          <h3>Warum Eco-Rechner?</h3>
          <p class="muted">Tools, die wirklich helfen ‚Äî kein Tracking, klare Tipps, konkrete Produkt-Empfehlungen (Affiliate, transparent).</p>
        </div>

        <div class="blogTeaser">
          <div class="teaser">
            <h4><a href="/blog/strom-sparen-tipps.html" style="color:#2f5d3a;text-decoration:none">10 Wege, Strom zu sparen</a></h4>
            <p class="muted">Praktische Alltagstipps & empfohlene Produkte.</p>
          </div>
          <div class="teaser">
            <h4><a href="/blog/mini-solar-anlagen.html" style="color:#2f5d3a;text-decoration:none">Mini-Solar & Balkonkraft</a></h4>
            <p class="muted">Wann sich ein Balkon-Solarsystem lohnt.</p>
          </div>
          <div class="teaser">
            <h4><a href="/blog/co2-fussabdruck.html" style="color:#2f5d3a;text-decoration:none">CO‚ÇÇ-Rechner & Tipps</a></h4>
            <p class="muted">Wie du deinen CO‚ÇÇ-Fu√üabdruck senkst.</p>
          </div>
        </div>
      </section>

      <!-- right: main calculator -->
      <aside class="calcWrap">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:700">Eco-Rechner</div>
            <div class="muted">Datenschutz-freundlich</div>
          </div>

          <label for="mode">Modus</label>
          <select id="mode" aria-label="Modus">
            <option value="annual">J√§hrlicher Verbrauch (kWh)</option>
            <option value="devices">Ger√§te-Modus (Watt, Std/Tag)</option>
            <option value="simulateSolar">Mit Solar simulieren</option>
          </select>

          <div id="annualBlock" style="margin-top:10px;">
            <label for="annualKwh">J√§hrlicher Verbrauch (kWh)</label>
            <input id="annualKwh" type="number" value="3600" min="0" />
          </div>

          <div id="devicesBlock" style="display:none;margin-top:10px;">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <label>Ger√§te hinzuf√ºgen</label>
              <button id="addDeviceBtn" class="btn" type="button">+ Ger√§t</button>
            </div>
            <div id="devicesList" style="margin-top:8px"></div>
            <div class="muted">Watt / Std pro Tag eingeben ‚Äî keine Speicherung</div>
          </div>

          <div id="solarSimBlock" style="display:none;margin-top:10px;">
            <label for="solarKwp">Solar-Leistung (kWp) f√ºr Simulation</label>
            <input id="solarKwp" type="number" step="0.1" value="0" min="0" />
            <div class="muted">Gib kWp ein (z. B. 0.6 f√ºr Balkonkraftwerk)</div>
          </div>

          <label for="price">Preis pro kWh (‚Ç¨)</label>
          <input id="price" type="number" step="0.01" value="0.40" min="0" />

          <div class="actions">
            <button id="calcBtn" class="btn">Berechnen</button>
            <button id="downloadBtn" class="btn ghost">Report herunterladen</button>
          </div>

          <div id="result" class="result" style="display:none"></div>
          <div class="muted" style="margin-top:10px">Alle Berechnungen lokal ‚Äî keine Daten werden √ºbertragen.</div>
        </div>
      </aside>
    </main>

    <footer>
      <div style="max-width:700px;margin:0 auto" class="muted">
        <a href="/impressum.html">Impressum</a> | <a href="/datenschutz.html">Datenschutz</a> ‚Äî &copy; <span id="year"></span> Eco-Rechner
      </div>
    </footer>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // DOM refs
    const modeEl = document.getElementById('mode'), annualBlock = document.getElementById('annualBlock'),
          devicesBlock = document.getElementById('devicesBlock'), solarSimBlock = document.getElementById('solarSimBlock'),
          devicesList = document.getElementById('devicesList'), addDeviceBtn = document.getElementById('addDeviceBtn'),
          calcBtn = document.getElementById('calcBtn'), downloadBtn = document.getElementById('downloadBtn'),
          resultDiv = document.getElementById('result');

    modeEl.addEventListener('change', ()=>{ if(modeEl.value==='annual'){annualBlock.style.display=''; devicesBlock.style.display='none'; solarSimBlock.style.display='none'} else if(modeEl.value==='devices'){annualBlock.style.display='none'; devicesBlock.style.display=''; solarSimBlock.style.display='none'} else {annualBlock.style.display='none'; devicesBlock.style.display='none'; solarSimBlock.style.display=''} });

    function createDeviceRow(name='', watt=100, hours=1){
      const wrapper = document.createElement('div');
      wrapper.style.display='grid'; wrapper.style.gridTemplateColumns='1fr 80px 80px 36px'; wrapper.style.gap='8px'; wrapper.style.marginTop='6px';
      const nameInput = document.createElement('input'); nameInput.type='text'; nameInput.placeholder='z. B. K√ºhlschrank'; nameInput.value=name;
      const wattInput = document.createElement('input'); wattInput.type='number'; wattInput.min='0'; wattInput.value=watt;
      const hoursInput = document.createElement('input'); hoursInput.type='number'; hoursInput.step='0.1'; hoursInput.value=hours;
      const removeBtn = document.createElement('button'); removeBtn.type='button'; removeBtn.textContent='‚úï'; removeBtn.style.background='#ff6b6b'; removeBtn.style.border='none'; removeBtn.style.color='#fff'; removeBtn.style.borderRadius='8px'; removeBtn.addEventListener('click', ()=>wrapper.remove());
      wrapper.appendChild(nameInput); wrapper.appendChild(wattInput); wrapper.appendChild(hoursInput); wrapper.appendChild(removeBtn);
      devicesList.appendChild(wrapper);
    }
    addDeviceBtn && addDeviceBtn.addEventListener('click', ()=>createDeviceRow('Neues Ger√§t',100,1));
    // examples
    createDeviceRow('60W Lampe',60,3); createDeviceRow('PC (Last)',200,5);

    function computeFromDevices(price){
      const rows = Array.from(devicesList.children); let totalKwh = 0; const details=[];
      rows.forEach(row=>{ const name=row.children[0].value||'Ger√§t'; const watt=parseFloat(row.children[1].value)||0; const hours=parseFloat(row.children[2].value)||0; const kwh=(watt/1000)*hours*365; totalKwh += kwh; details.push({name,watt,hours,kwh}); });
      const cost = totalKwh * price; return {totalKwh,cost,details};
    }
    function computeFromAnnual(annualKwh, price, solarKwp=0){
      const totalKwh = parseFloat(annualKwh)||0;
      // simulate solar: assume 1000 kWh/kWp/year scaled by efficiency ~0.9 for balcony
      const solarProd = parseFloat(solarKwp)||0; const solarKwh = solarProd * 900; // conservative
      const netKwh = Math.max(0, totalKwh - solarKwh);
      const cost = netKwh * price;
      return {totalKwh, cost, solarKwh, netKwh, details:[]};
    }
    function co2FromKwh(kwh){ return kwh * 0.4; }

    function showResult(res){
      resultDiv.style.display='block';
      const euro = v=>'‚Ç¨ '+v.toFixed(2);
      let html = '<h3>Ergebnis</h3>';
      html += `<p>J√§hrlicher Verbrauch: <strong>${res.totalKwh.toFixed(0)} kWh</strong></p>`;
      if(res.solarKwh!==undefined){
        html += `<p>Solarproduktion (gesch√§tzt): <strong>${res.solarKwh.toFixed(0)} kWh</strong></p>`;
        html += `<p>Netto aus Netz: <strong>${res.netKwh.toFixed(0)} kWh</strong></p>`;
      }
      html += `<p>J√§hrliche Stromkosten (Netto): <strong>${euro(res.cost)}</strong></p>`;
      html += `<p>Gesch√§tzter CO‚ÇÇ-Aussto√ü: <strong>${co2FromKwh(res.totalKwh).toFixed(1)} kg</strong></p>`;

      const avg=2500;
      if(res.totalKwh>avg) html += `<p style="color:#b33">Dein Verbrauch liegt √ºber dem deutschen Durchschnitt (~${avg} kWh).</p>`; else html += `<p style="color:#1a7a3b">Du liegst unter dem Durchschnitt (~${avg} kWh) ‚Äî gut gemacht!</p>`;

      // bar
      const pct=Math.min(100,(res.totalKwh/6000)*100);
      html += `<div class="bar"><div class="barInner" style="width:${pct}%;"></div></div>`;

      if(res.details && res.details.length){
        html += `<h4 style="margin-top:12px">Ger√§te-Aufschl√ºsselung</h4><table style="width:100%;border-collapse:collapse"><thead><tr><th style="padding:6px;text-align:left">Ger√§t</th><th style="padding:6px">Watt</th><th style="padding:6px">Std/Tag</th><th style="padding:6px">kWh/Jahr</th></tr></thead><tbody>`;
        res.details.forEach(d=> html += `<tr><td style="padding:6px">${escapeHtml(d.name)}</td><td style="padding:6px">${d.watt}</td><td style="padding:6px">${d.hours}</td><td style="padding:6px">${d.kwh.toFixed(1)}</td></tr>`);
        html += `</tbody></table>`;
      }

      resultDiv.innerHTML = html; window._lastCalc = res;
      const inner=document.querySelector('.barInner'); if(inner) inner.style.width = pct + '%';
    }

    calcBtn.addEventListener('click', ()=>{
      const price = parseFloat(document.getElementById('price').value) || 0;
      let res;
      if(modeEl.value==='annual'){
        const k = document.getElementById('annualKwh').value;
        const solarKwp = parseFloat(document.getElementById('solarKwp')?.value || 0);
        res = computeFromAnnual(k, price, solarKwp);
      } else if(modeEl.value==='devices'){
        res = computeFromDevices(price);
      } else { // simulateSolar
        const k = document.getElementById('annualKwh').value;
        const solarKwp = parseFloat(document.getElementById('solarKwp')?.value || 0);
        res = computeFromAnnual(k, price, solarKwp);
      }
      showResult(res);
    });

    downloadBtn.addEventListener('click', ()=>{
      const res = window._lastCalc; if(!res){alert('Bitte zuerst berechnen.'); return;}
      const now=new Date().toISOString(); let txt = `Eco-Rechner Report\nErstellt: ${now}\n\nJ√§hrlicher Verbrauch: ${res.totalKwh.toFixed(0)} kWh\nJ√§hrliche Kosten: ‚Ç¨ ${res.cost.toFixed(2)}\nCO2: ${co2FromKwh(res.totalKwh).toFixed(1)} kg\n\n`;
      if(res.solarKwh) txt += `Solarproduktion: ${res.solarKwh.toFixed(0)} kWh\nNetto aus Netz: ${res.netKwh.toFixed(0)} kWh\n\n`;
      if(res.details && res.details.length){ txt += 'Ger√§te:\n'; res.details.forEach(d=>{ txt += ` - ${d.name}: ${d.watt}W, ${d.hours}h/Tag -> ${d.kwh.toFixed(1)} kWh/Jahr\n`; }); }
      txt += '\n(Dieser Report wurde lokal erstellt; keine Daten wurden √ºbertragen.)\n';
      const blob=new Blob([txt], {type:'text/plain;charset=utf-8'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download=`eco-rechner-report-${(new Date()).toISOString().slice(0,10)}.txt`; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
  </script>
</body>
</html>
